#! /usr/bin/env bash

GREEN='\037'
RED='\011'
BLUE='\036'

set-title()
{
    echo -ne "\e]2;$@\007"
}

test -n "$*" || exit 3

while true
do
  set-title "run-loop (working) $* $BLUE"
  $*
  if [[ $? -eq 0 ]]
  then
    echo -e '\033[42m******************\033[0m'
    set-title "run-loop (good) $* $GREEN"
  else
    echo -e '\033[41m******************\033[0m'
    set-title "run-loop (bad) $* $RED"
  fi
  echo; echo; echo
  inotifywait -e modify -r -q  *
  sleep 0.1
done
